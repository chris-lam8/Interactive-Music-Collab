window.onload=function(){var e=document.getElementById("thefile"),g=document.getElementById("audio");e.onchange=function(){var e=this.files;g.src=URL.createObjectURL(e[0]),g.load(),g.play();var t=new AudioContext,n=t.createMediaElementSource(g),a=t.createAnalyser(),i=document.getElementById("canvas");i.width=window.innerWidth,i.height=window.innerHeight;var o=i.getContext("2d");n.connect(a),a.connect(t.destination),a.fftSize=256;var r=a.frequencyBinCount;console.log(r);var c,l=new Uint8Array(r),d=i.width,f=i.height,u=d/r*2.5,y=0;g.play(),function e(){requestAnimationFrame(e),y=0,a.getByteFrequencyData(l),o.fillStyle="#000",o.fillRect(0,0,d,f);for(var t=0;t<r;t++){var n=(c=l[t])+t/r*25,i=t/r*250;o.fillStyle="rgb("+n+","+i+",50)",o.fillRect(y,f-c,u,c),y+=u+1}}()}};